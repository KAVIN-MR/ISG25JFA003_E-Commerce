<div class="analytics-orders-container">
  <h1>Order Analytics</h1>

  <div *ngIf="loading" class="loading">
    <p>Loading order analytics data...</p>
  </div>

  <div *ngIf="error" class="error">
    <p>{{ error }}</p>
    <button (click)="fetchOrderAnalytics()">Retry</button>
  </div>

  <div *ngIf="!loading && !error" class="orders-section">
    <div class="summary-cards">
      <div class="summary-card">
        <h3>Total Orders</h3>
        <p class="metric">{{ orders.length }}</p>
      </div>
      <div class="summary-card">
        <h3>Total Revenue</h3>
        <p class="metric">₹{{ getTotalRevenue().toFixed(2) }}</p>
      </div>
      <div class="summary-card">
        <h3>Shipped Orders</h3>
        <p class="metric">{{ getOrderCountByStatus('shipped') }}</p>
      </div>
      <div class="summary-card">
        <h3>Pending Orders</h3>
        <p class="metric">{{ getOrderCountByStatus('placed') }}</p>
      </div>
    </div>

    <div class="orders-table-section">
      <h2>Order Details</h2>
      <div class="table-responsive">
        <table class="orders-table">
          <thead>
            <tr>
              <th>Order ID</th>
              <th>Customer Name</th>
              <th>Order Date</th>
              <th>Items Count</th>
              <th>Total Amount</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let order of orders">
              <td>#{{ order.orderId }}</td>
              <td>{{ order.customerName }}</td>
              <td>{{ order.orderDate | date:'mediumDate' }}</td>
              <td>{{ order.itemsCount }}</td>
              <td>₹{{ order.totalAmount.toFixed(2) }}</td>
              <td>
                <span class="status-badge" [ngClass]="getStatusClass(order.status)">
                  {{ order.status }}
                </span>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
