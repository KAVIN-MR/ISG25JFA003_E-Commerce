<div class="analytics-products-container">
  <h1>Product Analytics</h1>

  <div *ngIf="loading" class="loading">
    <p>Loading product analytics data...</p>
  </div>

  <div *ngIf="error" class="error">
    <p>{{ error }}</p>
    <button (click)="fetchProductAnalytics()">Retry</button>
  </div>

  <div *ngIf="!loading && !error" class="products-section">
    <div class="summary-cards">
      <div class="summary-card">
        <h3>Total Products</h3>
        <p class="metric">{{ products.length }}</p>
      </div>
      <div class="summary-card">
        <h3>Total Stock</h3>
        <p class="metric">{{ getTotalStock() }}</p>
      </div>
      <div class="summary-card">
        <h3>Total Sold</h3>
        <p class="metric">{{ getTotalSold() }}</p>
      </div>
      <div class="summary-card">
        <h3>Low Stock Items</h3>
        <p class="metric">{{ getLowStockCount() }}</p>
      </div>
    </div>

    <div class="products-table-section">
      <h2>Product Inventory & Sales</h2>
      <div class="table-responsive">
        <table class="products-table">
          <thead>
            <tr>
              <th>Product ID</th>
              <th>Product Name</th>
              <th>Category</th>
              <th>Price</th>
              <th>Stock Quantity</th>
              <th>Sold Quantity</th>
              <th>Stock Status</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let product of products">
              <td>{{ product.productId }}</td>
              <td>{{ product.productName }}</td>
              <td>{{ product.category }}</td>
              <td>â‚¹{{ product.price }}</td>
              <td>{{ product.stockQuantity }}</td>
              <td>{{ product.soldQuantity }}</td>
              <td>
                <span class="status-badge" [ngClass]="getStockStatusClass(product.stockQuantity)">
                  {{ getStockStatus(product.stockQuantity) }}
                </span>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
